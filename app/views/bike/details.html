{% extends "base.html" %}
{% block content %}
  <h1>{{bike.name}}</h1>
  <ul>
    <li><strong>Kilometers:</strong> {{bike.distance}}</li>
    <li><strong>Manufacturer / Model:</strong> {{bike.model}}</li>
    <li><strong>Link:</strong> {{bike.link}}</li>
    <li><strong>Year:</strong> {{bike.year}}</li>
  </ul>
  <p>
    {{bike.description}}
  </p>
  <p>
    <a href="{{base_path}}bike/{{bike.id}}/edit" class="btn btn-default">Muokkaa</a>
  </p>
  {% if components %}
  <table class="table table-striped table-bordered">
  <thead>
    <tr>
      <th>Name</th>
      <th>Kilometers</th>
      <th>Manufacturer / Model</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
  {% for component in components %}
  <tr>
      <td><a href="{{base_path}}component/{{component.id}}">{{component.name}}</a></td>
      <td>{{component.distance}}</td>
      <td>
        {% if component.link %}
        <a href="{{component.link}}">{{component.model}}</a>
        {% else %}
        {{component.model}}
        {% endif %}
      </td>
      <td>{{component.year}}</td>
      <td> 
        <div class="dropdown">
          <button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown">
            {% if component.retired %}
              Retired
            {% elseif component.in_use %}
              {{bikes[component.id]}}
            {% else %}
              Not in use
            {% endif %}
            <span class="caret"></span>
          </button>
          <ul class="dropdown-menu">
            {% for b in bikes %}
            <li><a href="#">{{b}}</a></li>
            {% endfor %}
            <li><a href="#">Not in use</a></li>
            <li><a href="#">Retired</a></li>
          </ul>
        </div>
      </td>
      <td><a class="btn btn-default btn-sm" href="#">Edit</a></td>
    </tr>
    {% endfor %}
    </tbody>
  </table>
  {% else %}
  <p>No components attached</p>
  {% endif %}
{% endblock %}